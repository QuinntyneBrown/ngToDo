var __extends,app;(function(n){var t;(function(n){"use strict";var t=function(){function n(n,t,i){var r=this;this.$location=n;this.$timeout=t;this.token=i;this.canActivate=function(){return r.token.get()?!0:(r.promise=r.$timeout(function(){r.$location.path("/login")},0),!1)}}return n}();n.AuthenticatedController=t})(t=n.security||(n.security={}))})(app||(app={})),function(n){var t;(function(n){var t=function(){function n(n,t,i,r,u){var f=this;this.$http=n;this.$q=t;this.baseUri=i;this.entityName=r;this.storage=u;this.add=function(n){var t=f.$q.defer();return f.$http({method:"POST",url:f.baseUri+"/add",data:n}).then(function(n){f.notifySaved();t.resolve(n)}).catch(function(n){t.reject(n)}),t.promise};this.update=function(n){var t=f.$q.defer();return f.$http({method:"PUT",url:f.baseUri+"/update",data:JSON.stringify(n)}).then(function(n){f.notifySaved();t.resolve(n)}).catch(function(n){t.reject(n)}),t.promise};this.getById=function(n){return f.fromCacheOrService({method:"GET",uri:f.baseUri+"/getbyid",params:{id:n}})};this.getAll=function(){return f.fromCacheOrService({method:"GET",uri:f.baseUri+"/getAll"})};this.remove=function(n){var t=f.$q.defer();return f.$http({method:"DELETE",url:f.baseUri+"/remove?id="+n}).then(function(n){f.notifyDeleted();t.resolve(n)}).catch(function(n){t.reject(n)}),t.promise};this.notifySaved=function(){f.notifyChanged("saved")};this.notifyDeleted=function(){f.notifyChanged("deleted")};this.notifyChanged=function(n){f.notify("modelDataChanged",{entityName:f.entityName,changeType:n})};this.notify=function(n,t){var i=document.createEvent("CustomEvent");i.initCustomEvent(n,!1,!1,t);document.dispatchEvent(i)};this.baseUri=this.baseUri+"/"+r;document.addEventListener("modelDataChanged",function(n){n.detail.entityName===r&&f.storage.get().forEach(function(n){n.category===r&&f.storage.put({name:n.name,value:null})})})}return n.prototype.fromCacheOrService=function(n){var r=this,t=this.$q.defer(),i=this.storage.getByName({name:n.uri+JSON.stringify(n.params)});return i&&i.value?t.resolve(i.value):this.$http({method:n.method,url:n.uri,data:n.data,params:n.params}).then(function(i){r.storage.put({category:r.entityName,name:n.uri+JSON.stringify(n.params),value:i});t.resolve(i)}).catch(function(n){t.reject(n)}),t.promise},n}();n.DataService=t})(t=n.common||(n.common={}))}(app||(app={})),function(n){var t;(function(n){var t=function(){function n(n,t,i,r,u){var f=this;this.$location=n;this.$q=t;this.fire=i;this.dataService=r;this.entityName=u;this.getById=function(n){var t=f.$q.defer();return f.dataService.getById(n).then(function(n){var i=null;f.instance(n.data).then(function(n){i=n;t.resolve(i)})}),t.promise};this.getAll=function(){var n=f.$q.defer();return f.dataService.getAll().then(function(t){var i=[],r=[];t.data.forEach(function(n){r.push(f.instance(n))});f.$q.all(r).then(function(t){t.forEach(function(n){i.push(n)});n.resolve(i)})}),n.promise};this.save=function(){var n=f.$q.defer(),t=[],i;return f.isValid()?f.id?(i="update",t.push(f.dataService.update(f))):(i="add",t.push(f.dataService.add(f))):n.reject(),f.$q.all(t).then(function(t){f.instance(t[0].data).then(function(){f.fire(document.getElementsByTagName("body")[0],f.entityName+"Changed",{entity:f,action:i});n.resolve()})}).catch(function(){n.reject()}),n.promise};this.remove=function(){var n=f.$q.defer();return f.id?f.dataService.remove(f.id).then(function(){f.fire(document.getElementsByTagName("body")[0],f.entityName+"Removed",{entity:f,action:"remove"});n.resolve()}):n.reject(),n.promise};this.isValid=function(){return f.getValidationErrors().length<1?!0:!1};this.instance=function(){throw new Error("Not Implemented");};this.getValidationErrors=function(){throw new Error("Not Implemented");};this.id=0;this.isDeleted=!1}return n}();n.Entity=t})(t=n.common||(n.common={}))}(app||(app={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(n){"use strict";var t=function(){function n(n,t){var i=this;this.storage=n;this.name=t;this.get=function(){if(i.data)return i.data;try{i.data=i.storage.getByName({name:i.name}).value}catch(n){}return i.data};this.set=function(n){i.data=n.data;i.storage.put({name:i.name,value:n.data})}}return n}(),i;n.StorageProperty=t;i=function(n){function t(t,i,r){var u=this;n.call(this,i,r);this.$rootScope=t;this.storage=i;this.name=r;this.onLocationChangeStart=function(n,t){t.indexOf("/login")>0&&(u.data=null,u.set({data:null}))};t.$on("$locationChangeStart",this.onLocationChangeStart)}return __extends(t,n),t}(t);n.SessionStorageProperty=i})(t=n.common||(n.common={}))}(app||(app={})),function(n){var t;(function(n){var t=function(){function n(t){var i=this;this.storageId=t;this.instance=function(t){return new n(t)};this.get=function(){return JSON.parse(localStorage.getItem(i.storageId)||"[]")};this.getByName=function(n){var r=JSON.parse(localStorage.getItem(i.storageId)||"[]"),t=null;return r.forEach(function(i){n.name===i.name&&(t=i)}),t};this.put=function(n){var t=JSON.parse(localStorage.getItem(i.storageId)||"[]"),r=!1;t.forEach(function(u){n.name===u.name&&(r=!0,u.value=n.value,u.category=n.category,localStorage.setItem(i.storageId,JSON.stringify(t)))});r||(t.push(n),localStorage.setItem(i.storageId,JSON.stringify(t)))}}return n}();n.Storage=t})(t=n.common||(n.common={}))}(app||(app={})),function(n){var t;(function(){angular.module("app.common",[])})(t=n.common||(n.common={}))}(app||(app={})),function(n){var t;(function(){function n(n,t){n.mappings.push({feature:"security",components:["login"]});t.configure([{path:"/login",component:"login"}])}angular.module("app.security",["app.common","app.ui"]).config(["featureComponentsMappingsProvider","routesProvider",n])})(t=n.security||(n.security={}))}(app||(app={})),function(n){var t;(function(){angular.module("app.ui",[])})(t=n.ui||(n.ui={}))}(app||(app={})),function(n){var t;(function(){function n(n,t,i,r,u,f,e,o){f.setDefaultUrl("/toDo/list");u.mappings.push({feature:"toDo",components:["toDoRecent","toDoForm","toDos","toDoDetail","toDoAbout"]});o.configure([{path:"/",redirectTo:"/login"},{path:"/toDo/about",component:"toDoAbout"},{path:"/toDo/list",component:"toDos"},{path:"/toDo/detail/:toDoId",component:"toDoDetail"},{path:"/toDo/create",component:"toDoForm"},{path:"/toDo/edit/:toDoId",component:"toDoForm"}]);r.configure("/api/")}angular.module("app.toDo",["ngNewRouter","ngAnimate","app.common","app.security","app.ui"]).config(["$componentLoaderProvider","$httpProvider","$locationProvider","apiEndpointProvider","featureComponentsMappingsProvider","loginRedirectProvider","oauthEndpointProvider","routesProvider",n])})(t=n.toDo||(n.toDo={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(n){var t=this;this.requestCounter=n;this.restrict="E";this.replace=!0;this.scope={};this.template="<div data-ng-show='requestCount > 0' class='work-spinner'><i class='fa fa-spinner fa-spin fade'><\/i><\/div>";this.link=function(n){n.$watch(function(){return t.requestCounter.getRequestCount()},function(t){n.requestCount=t})}}return n.instance=function(t){return new n(t)},n}();angular.module("app.common").directive("workSpinner",["requestCounter",n.instance])})(t=n.common||(n.common={}))}(app||(app={})),function(n){var t;(function(n){"use strict";var t=function(){function n(){this.config={baseUrl:"/api"}}return n.prototype.configure=function(n){this.config={baseUrl:n}},n.prototype.$get=function(){return this.config},n}();n.ApiEndpointProvider=t;angular.module("app.common").provider("apiEndpoint",t)})(t=n.common||(n.common={}))}(app||(app={})),function(n){var t;(function(n){"use strict";var t=function(){function n(){var n=this;this.mappings=[];this.setTemplateMapping=function(t){t.setTemplateMapping(function(t){var i=null;return n.mappings.forEach(function(n){n.components.forEach(function(r){t===r&&(i="src/app/"+n.feature+"/views/"+t+".html")})}),i})}}return n.prototype.$get=function(){return this.mappings},n}();n.FeatureComponentsMappingsProvider=t;angular.module("app.common").provider("featureComponentsMappings",t).config(["$componentLoaderProvider","featureComponentsMappingsProvider",function(n,t){t.setTemplateMapping(n);n.setCtrlNameMapping(function(n){return n[0].toLowerCase()+n.substr(1)+"Controller"})}])})(t=n.common||(n.common={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){return function(n){var t=[];for(var i in n)t.push(encodeURIComponent(i)+"="+encodeURIComponent(n[i]));return t.join("&").replace(/%20/g,"+")}};angular.module("app.common").factory("formEncode",n)})(t=n.common||(n.common={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(){}return n}();angular.module("app.common").service("historyService",[n])})(t=n.common||(n.common={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(){}return n}();angular.module("app.common").service("notificationService",[n])})(t=n.common||(n.common={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(n){var t=this;this.$q=n;this.requests=0;this.request=function(n){return t.requests+=1,t.$q.when(n)};this.requestError=function(n){return t.requests-=1,t.$q.reject(n)};this.response=function(n){return t.requests-=1,t.$q.when(n)};this.responseError=function(n){return t.requests-=1,t.$q.reject(n)};this.getRequestCount=function(){return t.requests}}return n.instance=function(t){return new n(t)},n}();angular.module("app.common").factory("requestCounter",["$q",n.instance]).config(["$httpProvider",function(n){n.interceptors.push("requestCounter")}])})(t=n.common||(n.common={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(){var n=this;this.routes=[];this.configure=function(t){t.forEach(function(t){n.routes.push(t)})}}return n.prototype.$get=function(){return this.routes},n}();angular.module("app.common").provider("routes",n)})(t=n.common||(n.common={}))}(app||(app={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(n){"use strict";var t=function(n){function t(t){var i=this;n.call(this,"commonLocalStorage");t.$on("$locationChangeStart",function(n,t){t.indexOf("/login")>0&&i.get().forEach(function(n){i.put({name:n.name,value:null})})})}return __extends(t,n),t}(n.Storage);angular.module("app.common").service("storage",["$rootScope",t])})(t=n.common||(n.common={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(){this.templateUrl="/src/app/security/directives/loginForm.html";this.controllerAs="loginForm";this.controller="loginFormController";this.restrict="E";this.replace=!0}return n.instance=function(){return new n},n}();angular.module("app.security").directive("loginForm",["securityService",n.instance])})(t=n.security||(n.security={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(n,t,i,r){var u=this;this.$location=n;this.loginRedirect=t;this.securityService=i;this.token=r;this.username="quinntynebrown@gmail.com";this.password="P@ssw0rd";this.tryToLogin=function(){u.securityService.login(u.username,u.password).then(function(){u.loginRedirect.redirectPreLogin()})}}return n}();angular.module("app.security").controller("loginFormController",["$location","loginRedirect","securityService",n])})(t=n.security||(n.security={}))}(app||(app={})),function(n){var t;(function(){angular.module("app.common").value("bind",function(n,t){var i,r;if(n)for(i in t)r=t[i],i.split(/\s+/).forEach(function(t){n.addEventListener(t,r)})})})(t=n.ui||(n.ui={}))}(app||(app={})),function(n){var t;(function(){angular.module("app.common").value("fire",function(n,t,i){var r=document.createEvent("HTMLEvents"),u;r.initEvent(t,!0,!0);for(u in i)r[u]=i[u];n.dispatchEvent(r)})})(t=n.ui||(n.ui={}))}(app||(app={})),function(n){var t;(function(n){var t=function(){function n(n){var t=this;this.$timeout=n;this.replace=!0;this.restrict="E";this.link=function(n,i,r){n.backdropClass=r.backdropClass||"";n.animate=!1;t.$timeout(function(){n.animate=!0})}}return n.instance=function(t){return new n(t)},n}();n.Backdrop=t;angular.module("app.ui").directive("modalBackdrop",[t.instance])})(t=n.ui||(n.ui={}))}(app||(app={})),function(n){var t;(function(n){"use strict";var t=function(){function n(){this.templateUrl="src/app/ui/appBar/appBar.html";this.replace=!0;this.restrict="E";this.controller="appBarController";this.controllerAs="appBar"}return n.instance=function(){return new n},n}();n.AppBar=t;angular.module("app.ui").directive("appBar",[t.instance])})(t=n.ui||(n.ui={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(n){this.appBarService=n}return n}();angular.module("app.ui").controller("appBarController",["appBarService",n])})(t=n.ui||(n.ui={}))}(app||(app={})),function(n){var t;(function(n){"use strict";var t=function(){function n(n,t,i){var r=this;this.historyService=t;this.notificationService=i;this.getPreviousUrl=function(){return null};this.goBack=function(){};this.hasNotifications=function(){return!1};this.setButtons=function(n){r.buttons=n};this.resetButtons=function(){r.buttons=null};this.getButtons=function(){return r.buttons};this.buttons=[];n.$on("$locationChangeStart",this.resetButtons)}return n}();n.AppBarService=t;angular.module("app.ui").service("appBarService",["$rootScope","historyService","notificationService",t])})(t=n.ui||(n.ui={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(n){var t=this;this.token=n;this.request=function(n){return t.token.get()&&(n.headers.Authorization="Bearer "+t.token.get()),n}}return n.instance=function(t){return new n(t)},n}();angular.module("app.security").factory("authorizationInterceptor",["token",n.instance]).config(["$httpProvider",function(n){n.interceptors.push("authorizationInterceptor")}])})(t=n.security||(n.security={}))}(app||(app={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(){"use strict";var t=function(n){function t(t,i){n.call(this,t,i,"currentUser")}return __extends(t,n),t}(n.common.SessionStorageProperty);angular.module("app.security").service("currentUser",["$rootScope","storage",t])})(t=n.security||(n.security={}))}(app||(app={})),function(n){var t;(function(){"use strict";function t(n){n.interceptors.push("loginRedirect")}var n=function(){function n(){var n=this;this.loginUrl="/login";this.defaultPath="/";this.setLoginUrl=function(t){n.loginUrl=t};this.setDefaultUrl=function(t){n.defaultPath=t};this.$get=["$q","$location",function(t,i){return{responseError:function(r){return r.status==401&&(n.lastPath=i.path(),i.path(n.loginUrl)),t.reject(r)},redirectPreLogin:function(){n.lastPath?(i.path(n.lastPath),n.lastPath=""):i.path(n.defaultPath)}}}]}return n}();angular.module("app.security").provider("loginRedirect",[n]).config(["$httpProvider",t])})(t=n.security||(n.security={}))}(app||(app={})),function(n){var t;(function(n){"use strict";var t=function(){function n(){this.config={baseUrl:"/login"}}return n.prototype.configure=function(n){this.config={baseUrl:n}},n.prototype.$get=function(){return this.config},n}();n.OAuthEndpointProvider=t;angular.module("app.security").provider("oauthEndpoint",t)})(t=n.security||(n.security={}))}(app||(app={})),function(n){var t;(function(n){"use strict";var t=function(){function n(n,t,i,r,u,f,e,o,s){var h=this;this.$http=n;this.$interval=t;this.$location=i;this.$q=r;this.currentUser=u;this.formEncode=f;this.oauthEndpoint=e;this.token=o;this.tokenExpiryDate=s;this.login=function(n,t){var i=h.$q.defer(),r=h.formEncode({username:n,password:t,grant_type:"password"});return h.$http.post(h.oauthEndpoint.baseUrl,r,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){h.processToken(n,t).then(function(){i.resolve(!0)})}).catch(function(){i.reject()}),i.promise};this.processToken=function(n,t){var i=h.$q.defer();return h.token.set({data:t.data.access_token}),h.tokenExpiryDate.set({data:Date.now()+t.data.expires_in*100}),h.getCurrentUser().then(function(n){h.currentUser.set({data:n});i.resolve()}),i.promise};this.getCurrentUser=function(){var n=h.$q.defer();return h.$http({method:"GET",url:"api/identity/getCurrentUser"}).then(function(t){n.resolve(t.data)}).catch(function(t){n.reject(t)}),n.promise};this.tokenExpired=function(){return Date.now()>h.tokenExpiryDate.get()}}return n}();n.SecurityService=t;angular.module("app.security").service("securityService",["$http","$interval","$location","$q","currentUser","formEncode","oauthEndpoint","token","tokenExpiryDate",t])})(t=n.security||(n.security={}))}(app||(app={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(){"use strict";var t=function(n){function t(t,i){n.call(this,t,i,"token")}return __extends(t,n),t}(n.common.SessionStorageProperty);angular.module("app.security").service("token",["$rootScope","storage",t])})(t=n.security||(n.security={}))}(app||(app={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(){"use strict";var t=function(n){function t(t,i){n.call(this,t,i,"tokenExpiryDate")}return __extends(t,n),t}(n.common.SessionStorageProperty);angular.module("app.security").service("tokenExpiryDate",["$rootScope","storage",t])})(t=n.security||(n.security={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(){this.instance=function(){};this.getName=function(){};this.getCurrent=function(){}}return n}()})(t=n.security||(n.security={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(){}return n}();angular.module("app.security").controller("loginController",[n])})(t=n.security||(n.security={}))}(app||(app={})),function(n){var t;(function(){angular.module("app.ui").value("clientRectEquals",function(n,t){return!n||!t?!1:n.top===t.top&&n.left===t.left&&n.bottom===t.bottom&&n.right===t.right})})(t=n.ui||(n.ui={}))}(app||(app={})),function(n){var t;(function(){angular.module("app.ui").value("getBoundingRectForDetachedElement",function(n){var t;return n.style.visibility="none",document.body.appendChild(n),t=n.getBoundingClientRect(),n.parentNode.removeChild(n),t})})(t=n.ui||(n.ui={}))}(app||(app={})),function(n){var t;(function(){angular.module("app.ui").value("getSurroundingWindowSpace",function(n,t){var i=n.getBoundingClientRect();return{top:i.top,left:i.left,bottom:t.innerHeight-i.bottom,right:t.innerWidth-i.right}})})(t=n.ui||(n.ui={}))}(app||(app={})),function(n){var t;(function(){angular.module("app.ui").value("positionDetachedElement",function(n,t,i,r,u){var f=n.getBoundingClientRect(),h,c,s,e,o;if(u==="center"){for(h=(f.bottom-f.top)/2+f.top,c=(f.right-f.left)/2+f.left,e=0;e<i.length;e++){o=i.length==e+1;switch(i[e]){case"top":if(f.top>r.height||o){if(f.width>r.width||o)return t.style.top=f.top-r.height+"px",t.style.left=c-r.width/2+"px",{position:i[e],elementRect:r};if(s=(r.width-f.width)/2,f.right+s<window.innerWidth&&f.left>s)return t.style.top=f.top-r.height+"px",t.style.left=c-r.width/2+"px",{position:i[e],elementRect:r}}break;case"left":if(f.left>r.width||o){if(f.height>r.height||o)return t.style.left=f.left-r.width+"px",t.style.top=h-r.height/2+"px",{position:i[e],elementRect:r};if(s=(r.height-f.height)/2,f.bottom+s<window.innerHeight&&f.top>s)return t.style.left=f.left-r.width+"px",t.style.top=h-r.height/2+"px",{position:i[e],elementRect:r}}break;case"bottom":if(window.innerHeight-f.bottom>r.height||o){if(f.width>r.width||o)return t.style.top=f.bottom+"px",t.style.left=c-r.width/2+"px",{position:i[e],elementRect:r};if(s=(r.width-f.width)/2,f.right+s<window.innerWidth&&f.left>s)return t.style.top=f.bottom+"px",t.style.left=c-r.width/2+"px",{position:i[e],elementRect:r}}break;case"right":if(window.innerWidth-f.right>r.width||o){if(f.height>r.height||o)return t.style.left=f.right+"px",t.style.top=h-r.height/2+"px",{position:i[e],elementRect:r};if(s=(r.height-f.height)/2,f.bottom+s<window.innerHeight&&f.top>s)return t.style.left=f.right+"px",t.style.top=h-r.height/2+"px",{position:i[e],elementRect:r}}}}throw new Error("Unable to position place pop up.");}if(u==="left")for(t.style.left=f.left+"px",e=0;e<i.length;e++){if(o=i.length==e+1,i[e]==="top"&&(f.top>=r.height||o))return t.style.bottom=f.top+"px",{position:i[e],elementRect:r};if(i[e]==="bottom"&&(window.innerHeight-f.bottom>=r.height||o))return t.style.top=f.bottom+"px",{position:i[e],elementRect:r}}})})(t=n.ui||(n.ui={}))}(app||(app={})),function(n){var t;(function(n){"use strict";var t=function(){function n(){this.restrict="E";this.replace=!0;this.templateUrl="/src/app/ui/appBarButton/appBarButton.html";this.scope={button:"="}}return n.instance=function(){return new n},n}();n.AppBarButton=t;angular.module("app.ui").directive("appBarButton",[t.instance])})(t=n.ui||(n.ui={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(){this.templateUrl="src/app/ui/hamburgerButton/hamburgerButton.html";this.replace=!0;this.restrict="E";this.scope={onClick:"&"}}return n.instance=function(){return new n},n}();angular.module("app.ui").directive("hamburgerButton",[n.instance])})(t=n.ui||(n.ui={}))}(app||(app={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(){"use strict";var t=function(n){function t(t,i,r){n.call(this,t,r,i);this.$location=t;this.token=i;this.$timeout=r}return __extends(t,n),t}(n.security.AuthenticatedController);angular.module("app.toDo").controller("toDoAboutController",["$location","$timeout","token",t])})(t=n.toDo||(n.toDo={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(n,t,i,r,u,f,e,o){var s=this;this.$interval=n;this.$location=t;this.$rootScope=i;this.$router=r;this.currentUser=u;this.routes=f;this.securityService=e;this.token=o;this.isLoggedIn=function(){return s.token.get()};this.getUsername=function(){var n=s.currentUser.get();return n?n.firstname+" "+n.lastname:null};r.config(f);n(function(){e.tokenExpired()&&t.path("/login")},6e3)}return n}();angular.module("app.toDo").controller("toDoAppController",["$interval","$location","$rootScope","$router","currentUser","routes","securityService","token",n])})(t=n.toDo||(n.toDo={}))}(app||(app={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(){"use strict";var t=function(n){function t(t,i,r,u,f,e){var o=this;n.call(this,t,r,e);this.$location=t;this.$q=i;this.$timeout=r;this.$routeParams=u;this.toDo=f;this.token=e;this.activate=function(){var n=o.$q.defer();return o.$routeParams.toDoId?o.toDo.getById(o.$routeParams.toDoId).then(function(t){o.toDo=t;n.resolve(!0)}).catch(function(){n.resolve(!1)}):o.toDo.instance(null).then(function(t){o.toDo=t;n.resolve(!0)}),n.promise}}return __extends(t,n),t}(n.security.AuthenticatedController);angular.module("app.toDo").controller("toDoDetailController",["$location","$q","$timeout","$routeParams","toDo","token",t])})(t=n.toDo||(n.toDo={}))}(app||(app={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(){"use strict";var t=function(n){function t(t,i,r,u,f,e,o){var s=this;n.call(this,t,u,o);this.$location=t;this.$q=i;this.$routeParams=r;this.$timeout=u;this.appBarService=f;this.toDo=e;this.token=o;this.setAppBarButtons=function(){s.appBarService.setButtons([{type:"Done",text:"Done",onClick:s.toDo.complete,isValid:s.toDo.isValid},{type:"Save",text:"Save",onClick:function(){s.toDo.save().then(function(){s.$location.path("/toDo/list")})},isValid:s.toDo.isValid}])};this.activate=function(){var n=s.$q.defer();return s.$routeParams.toDoId?s.toDo.getById(s.$routeParams.toDoId).then(function(t){s.toDo=t;s.setAppBarButtons();n.resolve(!0)}).catch(function(){n.resolve(!1)}):s.toDo.instance(null).then(function(t){s.toDo=t;s.setAppBarButtons();n.resolve(!0)}),n.promise};this.deactivate=function(){s.toDo=null;s.token=null;s.appBarService=null;s.promise=null}}return __extends(t,n),t}(n.security.AuthenticatedController);angular.module("app.toDo").controller("toDoFormController",["$location","$q","$routeParams","$timeout","appBarService","toDo","token",t])})(t=n.toDo||(n.toDo={}))}(app||(app={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(){"use strict";var t=function(n){function t(t,i,r,u,f){var e=this;n.call(this,t,r,f);this.$location=t;this.$q=i;this.$timeout=r;this.toDo=u;this.token=f;this.activate=function(){var n=e.$q.defer();return e.toDo.getRecent().then(function(t){e.toDos=t;n.resolve(!0)}).catch(function(){n.resolve(!1)}),n.promise}}return __extends(t,n),t}(n.security.AuthenticatedController);angular.module("app.toDo").controller("toDoRecentController",["$location","$timeout","$q","toDo","token",t])})(t=n.toDo||(n.toDo={}))}(app||(app={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(){"use strict";var t=function(n){function t(t,i,r,u,f,e,o){var s=this;n.call(this,i,u,o);this.$document=t;this.$location=i;this.$q=r;this.$timeout=u;this.bind=f;this.toDo=e;this.token=o;this.activate=function(){angular.element(s.$document).bind("toDoRemoved",s.onToDoRemoved);var n=s.$q.defer();return s.toDo.getAll().then(function(t){s.toDos=t;n.resolve(!0)}).catch(function(){n.resolve(!1)}),n.promise};this.deactivate=function(){angular.element(s.$document).unbind("toDoRemoved");s.toDos=null;s.token=null;s.toDo=null;s.promise=null};this.onToDoRemoved=function(n){if(n.action==="remove")for(var t=0;t<s.toDos.length;t++)s.toDos[t].id===n.entity.id&&s.toDos.splice(t,1)}}return __extends(t,n),t}(n.security.AuthenticatedController);angular.module("app.toDo").controller("toDosController",["$document","$location","$q","$timeout","bind","toDo","token",t])})(t=n.toDo||(n.toDo={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(n){var t=this;this.$q=n;this.showModal=function(){var n=t.$q.defer();return n.promise}}return n}();angular.module("app.ui").service("modalService",[n])})(t=n.ui||(n.ui={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(){this.restrict="E";this.replace=!0;this.templateUrl="/src/app/toDo/directives/toDoItem.html";this.scope={toDoItem:"="}}return n.instance=function(){return new n},n}();angular.module("app.toDo").directive("toDoItem",[n.instance])})(t=n.toDo||(n.toDo={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(){this.replace=!0;this.restrict="E";this.templateUrl="/src/app/toDo/directives/toDoItems.html";this.scope={toDoItems:"="}}return n.instance=function(){return new n},n}();angular.module("app.toDo").directive("toDoItems",[n.instance])})(t=n.toDo||(n.toDo={}))}(app||(app={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(){"use strict";var t=function(n){function t(i,r,u,f,e,o){var s=this;n.call(this,i,r,u,f,"toDo");this.$location=i;this.$q=r;this.fire=u;this.toDoService=f;this.toDoStatuses=e;this.toDoPritories=o;this.instance=function(n){n===void 0&&(n=null);var r=s.$q.defer(),i;return n===null?i=new t(s.$location,s.$q,s.fire,s.toDoService,s.toDoStatuses,s.toDoPritories):(i=new t(s.$location,s.$q,s.fire,s.toDoService,s.toDoStatuses,s.toDoPritories),i.id=n.id||0,i.name=n.name,i.description=n.description,i.toDoStatus=n.toDoStatus,i.toDoPriority=n.toDoPriority,i.dueDate=n.dueDate,i.username=n.username),r.resolve(i),r.promise};this.getValidationErrors=function(){var n=[];return(!s.name||s.name.length<0)&&n.push("Name can not be empty"),n};this.complete=function(){if(s.isValid())return s.setStatus(s.toDoStatuses.completed)};this.toDo=function(){if(s.isValid())return s.setStatus(s.toDoStatuses.toDo)};this.toDoNever=function(){if(s.isValid())return s.setStatus(s.toDoStatuses.toDoNever)};this.start=function(){if(s.isValid())return s.setStatus(s.toDoStatuses.started)};this.setStatus=function(n){var t=s.$q.defer();return s.toDoStatus=n,s.save().then(function(){t.resolve()}),t.promise};this.getRecent=function(){var n=s.$q.defer();return s.toDoService.getRecent().then(function(t){var r=[],i=[];t.data.forEach(function(n){i.push(s.instance(n))});s.$q.all(i).then(function(t){t.forEach(function(n){i.push(s.instance(n))});n.resolve(r)})}),n.promise};this.toDoStatus=e.new;this.toDoPriority=o.medium}return __extends(t,n),t}(n.common.Entity);angular.module("app.toDo").service("toDo",["$location","$q","fire","toDoService","toDoStatuses","toDoPriorities",t])})(t=n.toDo||(n.toDo={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(n){var t=this;this.$q=n;this.getAll=function(){var n=t.$q.defer(),i=(new breeze.EntityQuery).from("todos");return i.using(t.entityManager).execute().then(function(t){t.data=t.results;n.resolve(t)}).catch(function(){}),n.promise};this.getById=function(n){var i=t.$q.defer(),r;return n=Math.floor(n),r=(new breeze.EntityQuery).from("todos").where("id","==",n),r.using(t.entityManager).execute().then(function(n){n.data=n.results[0];i.resolve(n)}).catch(function(){}),i.promise};this.getRecent=function(){var n=t.$q.defer(),i=(new breeze.EntityQuery).from("todos");return i.using(t.entityManager).execute().then(function(t){t.data=t.results;n.resolve(t)}).catch(function(){}),n.promise};this.remove=function(){var n=t.$q.defer();return n.promise};this.add=function(){var n=t.$q.defer();return n.promise};this.update=function(){var n=t.$q.defer();return t.entityManager.saveChanges(),n.promise};breeze.config.initializeAdapterInstance("modelLibrary","backingStore",!0);breeze.NamingConvention.camelCase.setAsDefault();this.entityManager=new breeze.EntityManager("breeze/breezedataservice")}return n}()})(t=n.toDo||(n.toDo={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n;(function(n){n[n.low=0]="low";n[n.medium=1]="medium";n[n.high=2]="high"})(n||(n={}));angular.module("app.toDo").value("toDoPriorities",n)})(t=n.toDo||(n.toDo={}))}(app||(app={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(){"use strict";var t=function(n){function t(t,i,r,u){var f=this;n.call(this,t,i,r.baseUrl,"toDo",u);this.$http=t;this.$q=i;this.apiEndpoint=r;this.storage=u;this.getRecent=function(){return f.fromCacheOrService({method:"GET",uri:f.baseUri+"getRecent"})}}return __extends(t,n),t}(n.common.DataService);angular.module("app.toDo").service("toDoService",["$http","$q","apiEndpoint","storage",t])})(t=n.toDo||(n.toDo={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n;(function(n){n[n["new"]=0]="new";n[n.toDo=1]="toDo";n[n.toDoNever=2]="toDoNever";n[n.started=3]="started";n[n.completed=4]="completed"})(n||(n={}));angular.module("app.toDo").value("toDoStatuses",n)})(t=n.toDo||(n.toDo={}))}(app||(app={})),function(n){var t;(function(n){var t=function(){function n(){this.templateUrl="src/app/ui/appHeader/appHeader.html";this.replace=!0;this.restrict="E";this.controller="appHeaderController";this.controllerAs="appHeader";this.scope={title:"@",isLoggedIn:"&",getUsername:"&"}}return n.instance=function(){return new n},n}();n.AppHeader=t;angular.module("app.ui").directive("appHeader",[t.instance])})(t=n.ui||(n.ui={}))}(app||(app={})),function(n){var t;(function(n){var t=function(){function n(){}return n}();n.AppHeaderController=t;angular.module("app.ui").controller("appHeaderController",[t])})(t=n.ui||(n.ui={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(n){this.dynamicElement=n;this.restrict="A";this.link=function(){}}return n.instance=function(t){return new n(t)},n}();angular.module("app.ui").directive("dynamicElement",["dynamicElement",n.instance])})(t=n.ui||(n.ui={}))}(app||(app={})),function(n){var t;(function(){var n=function(){function n(n,t,i,r,u,f,e,o,s){var h=this;this.$compile=n;this.$http=t;this.$q=i;this.$templateCache=r;this.$timeout=u;this.clientRectEquals=f;this.getBoundingRectForDetachedElement=e;this.getSurroundingWindowSpace=o;this.positionDetachedElement=s;this.showDynamicElement=function(n){var t=h.$q.defer();return(h.$timeout.cancel(h.timeoutPromise),h.clientRectEquals(h.triggerElementRect,n.element.getBoundingClientRect()))?(h.triggerElementRect=null,h.hideAsync().then(function(){h.destroy(!0);t.resolve()}),t.promise):(h.destroy(!0),h.initialize(n),h.fetchAndSetTemplateAsync(n.templateUrl).then(function(){h.DynamicElementElement=h.createDynamicElementElement(h.htmlTemplate);h.$compile(h.DynamicElementElement)(n.triggerScope);h.$timeout(function(){h.styleDynamicElement(h.DynamicElementElement,h.displayArrow);var r=h.positionDetachedElement(n.element,h.DynamicElementElement,n.directionPriorityList,h.getBoundingRectForDetachedElement(h.DynamicElementElement),h.alignment,h.getSurroundingWindowSpace(n.element,window)),i=h.DynamicElementElement.querySelector(".arrow"),u=h.DynamicElementElement.querySelector(".arrow-border");switch(r.position){case"top":i.style.width="0px";i.style.height="0px";i.style.borderLeft="11px solid transparent";i.style.borderRight="11px solid transparent";i.style.borderBottom="11px solid white";i.style.position="absolute";i.style.marginLeft=(r.elementRect.width-15)/2+"px";i.style.top=(r.elementRect.height-31)/2+"px";break;case"bottom":i.style.width="0px";i.style.height="0px";i.style.borderLeft="11px solid transparent";i.style.borderRight="11px solid transparent";i.style.borderTop="11px solid white";i.style.position="absolute";i.style.marginLeft=r.elementRect.width-15+"px";i.style.top=(r.elementRect.height-31)/2+"px";break;case"left":i.style.width="0px";i.style.height="0px";i.style.borderTop="11px solid transparent";i.style.borderBottom="11px solid transparent";i.style.borderLeft="11px solid white";i.style.position="absolute";i.style.marginLeft=r.elementRect.width-21+"px";i.style.top=(r.elementRect.height-31)/2+"px";break;case"right":i.style.width="0px";i.style.height="0px";i.style.borderTop="11px solid transparent";i.style.borderBottom="11px solid transparent";i.style.borderRight="11px solid white";i.style.position="absolute";i.style.marginLeft="-10px";i.style.top=(r.elementRect.height-31)/2+"px"}document.body.appendChild(h.DynamicElementElement);h.$timeout(function(){h.DynamicElementElement.style.opacity="100";h.hideElementAsync(h.DynamicElementElement,n.visibilityDurationInMilliseconds).then(function(){}).then(function(){t.resolve()})},100)},0)}),t.promise)};this.dismiss=function(){var n=h.$q.defer(),t;return h.$timeout.cancel(h.timeoutPromise),t=document.querySelector("#pop-up"),t?(h.triggerElementRect=null,h.hideAsync().then(function(){h.destroy(!0);n.resolve()})):n.resolve(),n.promise};this.initialize=function(n){h.alignment=n.alignment||"center";h.displayArrow=n.displayArrow;h.margin=n.margin||"5px";h.triggerElement=n.element;h.triggerScope=n.triggerScope;h.visibilityDurationInMilliseconds=n.visibilityDurationInMilliseconds;h.triggerElementRect=n.element.getBoundingClientRect();h.transitionDurationInMilliseconds=n.transitionDurationInMilliseconds;h.viewBag=n.viewBag};this.fetchAndSetTemplateAsync=function(n){return h.$http({method:"GET",url:n,cache:h.$templateCache}).then(function(n){h.htmlTemplate=n.data})};this.hideElementAsync=function(n,t){var i=h.$q.defer();return h.timeoutPromise=h.$timeout(function(){h.destroy(!1).then(function(){i.resolve()})},t),i.promise};this.createDynamicElementElement=function(n){var t=document.createElement("div"),r,u,i;return t.id="pop-up",r=document.createElement("div"),r.setAttribute("class","arrow"),t.appendChild(r),u=document.createElement("div"),u.setAttribute("class","arrow-border"),t.appendChild(u),i=document.createElement("div"),i.setAttribute("class","inner"),i.innerHTML=n,t.appendChild(i),t};this.destroy=function(n){var i=h.$q.defer(),t=document.getElementById("pop-up");if(n){if(t)try{t.parentNode.removeChild(t)}catch(r){console.log("error")}}else return h.$timeout(function(){t.style.opacity="0"},0).then(function(){h.triggerElementRect=null;h.$timeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},h.transitionDurationInMilliseconds).then(function(){i.resolve()})}),i.promise};this.setOpacityToZeroAsync=function(){var n=h.$q.defer();return h.$timeout(function(){h.DynamicElementElement.style.opacity="0";n.resolve()},0),n.promise};this.waitForTransitionAsync=function(){var n=h.$q.defer();return h.$timeout(function(){n.resolve()},h.transitionDurationInMilliseconds),n.promise};this.hideAsync=function(){var n=h.$q.defer();return h.setOpacityToZeroAsync().then(h.waitForTransitionAsync).then(function(){n.resolve()}),n.promise};this.styleDynamicElement=function(n,t){n.setAttribute("class","pop-up");n.setAttribute("style","-webkit-transition: opacity "+h.transitionDurationInMilliseconds+"ms ease-in-out;-o-transition: opacity "+h.transitionDurationInMilliseconds+"ms ease-in-out;transition: opacity "+h.transitionDurationInMilliseconds+"ms ease-in-out;");n.style.opacity="0";n.style.position="absolute";n.style.display="block";t&&(n.style.border="10px solid transparent");var i=n.querySelector(".inner");i.setAttribute("style","-webkit-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);border-radius:5px;");i.style.backgroundColor="white";i.style.margin=h.margin;i.style.border="1px solid #cccccc";i.style.boxShadow="0 5px 10px rgba(0, 0, 0, 0.2)"}}return n.prototype.processResponse=function(n){var t=this.$q.defer();return this.createDynamicElementElement(n.data),this.$compile(this.DynamicElementElement)(this.triggerScope),t.resolve(),t.promise},n}();angular.module("app.ui").service("dynamicElement",["$compile","$http","$q","$templateCache","$timeout","clientRectEquals","getBoundingRectForDetachedElement","getSurroundingWindowSpace","positionDetachedElement",n])})(t=n.ui||(n.ui={}))}(app||(app={}));
//# sourceMappingURL=app.min.js.map
