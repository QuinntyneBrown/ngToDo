{"version":3,"sources":["toDo/services/toDo.ts"],"names":["app","app.toDo","app.toDo.ToDo","app.toDo.ToDo.constructor"],"mappings":"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","file":"toDo/services/toDo.js","sourceRoot":"C:/Projects/ngToDo/ngToDo/","sourcesContent":["module app.toDo {\r\n\r\n    \"use strict\";\r\n\r\n    class ToDo extends common.Entity<ToDo> implements IToDo {\r\n\r\n        constructor(public $location: ng.ILocationService,\r\n            public $q: ng.IQService,\r\n            public fire: common.IFire,\r\n            private toDoService: IToDoService,\r\n            private toDoStatuses: IToDoStatuses,\r\n            private toDoPritories: IToDoPritories) {\r\n            super($location,$q, fire, toDoService,'toDo');\r\n            this.toDoStatus = toDoStatuses.new;\r\n            this.toDoPriority = toDoPritories.medium;\r\n        }\r\n\r\n        public instance = (data: any = null) => {\r\n            var deferred = this.$q.defer();\r\n\r\n            var toDo;\r\n\r\n            if (data === null) {\r\n                toDo = new ToDo(this.$location, this.$q, this.fire, this.toDoService, this.toDoStatuses, this.toDoPritories);\r\n            } else {\r\n                toDo = new ToDo(this.$location, this.$q, this.fire, this.toDoService, this.toDoStatuses, this.toDoPritories);\r\n                toDo.id = data.id || 0;\r\n                toDo.name = data.name;\r\n                toDo.description = data.description;\r\n                toDo.toDoStatus = data.toDoStatus;\r\n                toDo.toDoPriority = data.toDoPriority;\r\n                toDo.dueDate = data.dueDate;\r\n                toDo.username = data.username;\r\n            }\r\n\r\n            deferred.resolve(toDo);\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        public id: number;\r\n\r\n        public name: string;\r\n\r\n        public description: string;\r\n\r\n        public toDoStatus: number;\r\n\r\n        public toDoPriority: number;\r\n\r\n        public completedDateTime: Date;\r\n\r\n        public createdDateTime: Date;\r\n\r\n        public getValidationErrors = (): string[]=> {\r\n            \r\n            var validationErrors: string[] = [];\r\n\r\n            if (!this.name || this.name.length < 0)\r\n                validationErrors.push(\"Name can not be empty\");\r\n\r\n            //if (!this.description || this.description.length < 0)\r\n            //    validationErrors.push(\"Description can not be empty\");\r\n\r\n            return validationErrors;\r\n        }\r\n\r\n        public complete = () => {\r\n            if (this.isValid()) {\r\n                return this.setStatus(this.toDoStatuses.completed);\r\n            }\r\n        }\r\n\r\n        public toDo = () => {\r\n            if (this.isValid()) {\r\n                return this.setStatus(this.toDoStatuses.toDo);\r\n            }\r\n        }\r\n\r\n        public toDoNever = () => {\r\n            if (this.isValid()) {\r\n                return this.setStatus(this.toDoStatuses.toDoNever);    \r\n            }            \r\n        }\r\n\r\n        public start = () => {\r\n            if (this.isValid()) {\r\n                return this.setStatus(this.toDoStatuses.started);\r\n            }\r\n        }\r\n\r\n        private setStatus = (toDoStatus: number) => {\r\n\r\n            var deferred = this.$q.defer();\r\n\r\n            this.toDoStatus = toDoStatus;\r\n\r\n            this.save().then((results) => {\r\n                deferred.resolve();\r\n            });\r\n\r\n            return deferred.promise;            \r\n        }\r\n\r\n        public getRecent = () => {\r\n\r\n            var deferred = this.$q.defer();\r\n\r\n            this.toDoService.getRecent().then((results) => {\r\n                var entities = [];\r\n\r\n                var promises = [];\r\n\r\n                results.data.forEach((result) => {\r\n                    promises.push(this.instance(result));\r\n                });\r\n\r\n                this.$q.all(promises).then((resultsArray) => {\r\n                    resultsArray.forEach((results) => {\r\n                        promises.push(this.instance(results));\r\n                    });                               \r\n                    deferred.resolve(entities);\r\n                });\r\n\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n    }\r\n\r\n    angular.module(\"app.toDo\").service(\"toDo\", [\"$location\", \"$q\",\"fire\",\"toDoService\", \"toDoStatuses\", \"toDoPriorities\",ToDo]);\r\n} "]}