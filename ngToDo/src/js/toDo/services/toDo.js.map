{"version":3,"sources":["toDo/services/toDo.ts"],"names":["app","app.toDo","app.toDo.ToDo","app.toDo.ToDo.constructor"],"mappings":"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","file":"toDo/services/toDo.js","sourceRoot":"C:/Projects/ngToDo/ngToDo/","sourcesContent":["module app.toDo {\r\n    \r\n    class ToDo extends common.Entity<ToDo> implements IToDo {\r\n\r\n        constructor(public $location: ng.ILocationService,\r\n            public $q: ng.IQService,\r\n            private toDoService: IToDoService,\r\n            private toDoStatuses: IToDoStatuses) {\r\n            super($location,$q, toDoService,'/toDo');\r\n            this.toDoStatus = toDoStatuses.new;\r\n        }\r\n\r\n        public instance = (data: any = null) => {\r\n            var deferred = this.$q.defer();\r\n\r\n            var toDo;\r\n\r\n            if (data === null) {\r\n                toDo = new ToDo(this.$location,this.$q, this.toDoService, this.toDoStatuses);\r\n            } else {\r\n                toDo = new ToDo(this.$location, this.$q, this.toDoService, this.toDoStatuses);\r\n                toDo.id = data.id || 0;\r\n                toDo.name = data.name;\r\n                toDo.description = data.description;\r\n                toDo.toDoStatus = data.toDoStatus || 0;\r\n            }\r\n\r\n            deferred.resolve(toDo);\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        public id: number;\r\n\r\n        public name: string;\r\n\r\n        public description: string;\r\n\r\n        public toDoStatus: number;\r\n\r\n        public completedDateTime: Date;\r\n\r\n        public createdDateTime: Date;\r\n\r\n        public getValidationErrors = (): string[]=> {\r\n            \r\n            var validationErrors: string[] = [];\r\n\r\n            if (!this.name || this.name.length < 0)\r\n                validationErrors.push(\"Name can not be empty\");\r\n\r\n            //if (!this.description || this.description.length < 0)\r\n            //    validationErrors.push(\"Description can not be empty\");\r\n\r\n            return validationErrors;\r\n        }\r\n\r\n        public complete = () => {\r\n            if (this.isValid()) {\r\n                return this.setStatus(this.toDoStatuses.completed);\r\n            }\r\n        }\r\n\r\n        public toDo = () => {\r\n            return this.setStatus(this.toDoStatuses.toDo);\r\n        }\r\n\r\n        public toDoNever = () => {\r\n            return this.setStatus(this.toDoStatuses.toDoNever);\r\n        }\r\n\r\n        public start = () => {\r\n            return this.setStatus(this.toDoStatuses.started);\r\n        }\r\n\r\n        public setStatus = (toDoStatus: number) => {\r\n\r\n            var deferred = this.$q.defer();\r\n\r\n            this.toDoStatus = toDoStatus;\r\n\r\n            this.save().then((results) => {\r\n                deferred.resolve();\r\n            });\r\n\r\n            return deferred.promise;            \r\n        }\r\n\r\n        public getRecent = () => {\r\n\r\n            var deferred = this.$q.defer();\r\n\r\n            this.toDoService.getRecent().then((results) => {\r\n                var entities = [];\r\n\r\n                var promises = [];\r\n\r\n                results.data.forEach((dataItem) => {\r\n                    promises.push(this.instance(dataItem));\r\n                });\r\n\r\n                this.$q.all(promises).then((allResults) => {\r\n                    allResults.forEach((allResult) => {\r\n                        promises.push(this.instance(allResult));\r\n                    });                               \r\n                    deferred.resolve(entities);\r\n                });\r\n\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n    }\r\n\r\n    angular.module(\"app.toDo\").service(\"toDo\", [\"$location\", \"$q\", \"toDoService\",\"toDoStatuses\",ToDo]);\r\n} "]}