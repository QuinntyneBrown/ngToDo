{"version":3,"sources":["entity.ts"],"names":["app","app.common","app.common.Entity","app.common.Entity.constructor"],"mappings":"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","file":"entity.js","sourceRoot":"C:/Projects/ngToDo/ngToDo/","sourcesContent":["module app.common {\r\n\r\n    export class Entity<T> implements IEntity<T> {\r\n\r\n        constructor(public $q: ng.IQService, private dataService: common.IDataService) {\r\n            this.id = 0;\r\n            this.isDeleted = false;\r\n        }\r\n\r\n        public id: number;\r\n\r\n        public isDeleted: boolean;\r\n\r\n        public getById = (id:any) => {\r\n\r\n            var deferred = this.$q.defer();\r\n\r\n            this.dataService.getById(id).then((results) => {\r\n                var entity:T = null;\r\n\r\n                this.instance(results.data).then((results) => {\r\n                    entity = results;\r\n                    deferred.resolve(entity);\r\n                });\r\n\r\n                \r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        public getAll = () => {\r\n\r\n            var deferred = this.$q.defer();\r\n\r\n            this.dataService.getAll().then((results) => {\r\n                var entities = [];\r\n\r\n                for (var i = 0; i < results.data.length; i++) {\r\n                    entities.push(this.instance(results.data[i]));    \r\n                }\r\n                \r\n                deferred.resolve(entities);\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        public save = () => {\r\n\r\n            var deferred = this.$q.defer();\r\n\r\n            if (this.id) {\r\n                this.dataService.update(this).then(() => {\r\n                    deferred.resolve();\r\n                });\r\n            } else {\r\n                this.dataService.add(this).then(() => {\r\n                    deferred.resolve();\r\n                });\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        public remove = () => {\r\n            var deferred = this.$q.defer();\r\n\r\n            if (this.id) {\r\n                this.dataService.remove(this.id).then(() => {\r\n                    this.isDeleted = true;\r\n                    deferred.resolve();\r\n                });\r\n            } else {\r\n                deferred.reject();\r\n            } \r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        public isValid = ():boolean => {\r\n            if (this.getValidationErrors().length < 1) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        public instance = (data: any): ng.IPromise<any> => {\r\n            throw new Error(\"Not Implemented\");\r\n        }\r\n\r\n        public getValidationErrors = (): string[]=> {\r\n            throw new Error(\"Not Implemented\");\r\n        }\r\n    }\r\n} "]}